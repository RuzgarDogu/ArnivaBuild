{"version":3,"file":"7-4ab3661e.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(auth)/login/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/7.js"],"sourcesContent":["import { A as APIURL } from \"../../../../chunks/app.config.js\";\nimport { r as redirect } from \"../../../../chunks/index.js\";\nclass Authentication {\n  token;\n  constructor() {\n    this.token = \"\";\n  }\n  static check = async (username, password) => {\n    const body = {\n      versionno: \"2.6\",\n      usercode: username,\n      password\n    };\n    const requestOptions = {\n      method: \"POST\",\n      body: JSON.stringify(body)\n    };\n    const response = await fetch(`${APIURL}/login`, requestOptions).then((response2) => response2.json());\n    return response.data;\n  };\n  async login(username, password) {\n    const user = await Authentication.check(username, password);\n    if (user) {\n      return user;\n    }\n    return false;\n  }\n}\nconst Auth = new Authentication();\nconst pages = [\n  [\"/home\", \"/sales\"],\n  [\"/dashboard\", \"/report\"]\n];\nconst load = async () => {\n  return {};\n};\nconst actions = {\n  default: async ({ request, cookies }) => {\n    const { username, password } = Object.fromEntries(await request.formData());\n    const user = await Auth.login(username, password);\n    if (user) {\n      const isadmin = user.isadmin || (user.params.rehber_kodu == \"ENES1\" ? 1 : 0);\n      cookies.set(\"token\", user.token, {\n        secure: false,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      cookies.set(\"isadmin\", isadmin, {\n        secure: false,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      cookies.set(\"username\", user.params.rehber_kodu, {\n        secure: false,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      throw redirect(303, pages[isadmin][0]);\n    } else {\n      cookies.delete(\"token\");\n      cookies.delete(\"isadmin\");\n      cookies.delete(\"username\");\n      throw redirect(303, \"/login\");\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(auth)/login/_page.server.ts.js';\n\nexport const index = 7;\nexport const component = async () => (await import('../entries/pages/(auth)/login/_page.svelte.js')).default;\nexport const file = '_app/immutable/entry/(auth)-login-page.svelte.5790d235.js';\nexport { server };\nexport const server_id = \"src/routes/(auth)/login/+page.server.ts\";\nexport const imports = [\"_app/immutable/entry/(auth)-login-page.svelte.5790d235.js\",\"_app/immutable/chunks/index.3c704159.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}
{"version":3,"file":"7-f30a7cdf.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(auth)/login/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/7.js"],"sourcesContent":["import { D as DEV } from \"../../../../chunks/prod-ssr.js\";\nimport { A as APIURL } from \"../../../../chunks/app.config.js\";\nimport { r as redirect } from \"../../../../chunks/index.js\";\nconst dev = DEV;\nclass Authentication {\n  token;\n  constructor() {\n    this.token = \"\";\n  }\n  static check = async (username, password) => {\n    const body = {\n      versionno: \"2.6\",\n      usercode: username,\n      password\n    };\n    const requestOptions = {\n      method: \"POST\",\n      body: JSON.stringify(body)\n    };\n    const response = await fetch(`${APIURL}/login`, requestOptions).then((response2) => response2.json());\n    return response.data;\n  };\n  async login(username, password, cookies, locals) {\n    const user = await Authentication.check(username, password);\n    if (user) {\n      locals.user = user;\n      const isadmin = user.isadmin || (user.params.rehber_kodu == \"ENES1\" ? 1 : 0);\n      cookies.set(\"token\", user.token, {\n        path: \"/\",\n        httpOnly: true,\n        sameSite: \"strict\",\n        secure: !dev,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      cookies.set(\"isadmin\", isadmin, {\n        path: \"/\",\n        httpOnly: true,\n        sameSite: \"strict\",\n        secure: !dev,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      cookies.set(\"username\", user.params.rehber_kodu, {\n        path: \"/\",\n        httpOnly: true,\n        sameSite: \"strict\",\n        secure: !dev,\n        maxAge: 60 * 60 * 24 * 30\n      });\n      const pages = [\n        [\"/home\", \"/sales\"],\n        [\"/dashboard\", \"/report\"]\n      ];\n      throw redirect(303, pages[isadmin][0]);\n    }\n    cookies.delete(\"token\");\n    return false;\n  }\n}\nconst Auth = new Authentication();\nconst load = async () => {\n  return {};\n};\nconst actions = {\n  default: async ({ request, cookies, locals }) => {\n    const { username, password } = Object.fromEntries(await request.formData());\n    await Auth.login(username, password, cookies, locals);\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(auth)/login/_page.server.ts.js';\n\nexport const index = 7;\nexport const component = async () => (await import('../entries/pages/(auth)/login/_page.svelte.js')).default;\nexport const file = '_app/immutable/entry/(auth)-login-page.svelte.4176eb26.js';\nexport { server };\nexport const server_id = \"src/routes/(auth)/login/+page.server.ts\";\nexport const imports = [\"_app/immutable/entry/(auth)-login-page.svelte.4176eb26.js\",\"_app/immutable/chunks/index.bc7c65c9.js\",\"_app/immutable/chunks/monetize.26b98f74.js\",\"_app/immutable/chunks/parse.d12b0d5b.js\",\"_app/immutable/chunks/singletons.49a35693.js\",\"_app/immutable/chunks/index.53433d2b.js\",\"_app/immutable/chunks/navigation.f5e505e3.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}